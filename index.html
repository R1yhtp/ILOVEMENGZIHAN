<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ç»™å­Ÿå­æ¶µå®å®çš„å°æƒŠå–œ ğŸ’Œ</title>
  
  <!-- éŸ³ä¹é¢„åŠ è½½ -->
  <link rel="preload" as="audio" href="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/2078190587.aac" type="audio/aac">
  
  <style>
    :root{
      --pink1:#ffd6e6; --pink2:#ffb3c7; --pink3:#ffe3ee;
      --rose:#a63b4f; --rose2:#b9475e;
      --card: rgba(255,255,255,.75);
      --cardBorder: rgba(255, 230, 236, .9);
      --shadow: rgba(210, 70, 90, .22);
      --btn:#ff4d6d; --btn2:#ff6f8b; --btnText:#ffffff;
      --inputBg: rgba(255,255,255,.65);
      --inputBorder: rgba(255, 120, 160, .35);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
      color: #3f2b2f;
      background: linear-gradient(145deg, var(--pink1) 0%, var(--pink2) 45%, var(--pink3) 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .petal{
      position:fixed; left:0; top:-20px;
      width:18px; height:18px;
      background: rgba(255, 220, 230, .65);
      border-radius: 150% 0 150% 0;
      transform: rotate(45deg);
      filter: blur(.6px);
      opacity: .8;
      pointer-events:none;
      z-index: 1;
      animation: floatPetals 10s linear infinite;
    }
    @keyframes floatPetals{
      0%{ transform: translateY(0) rotate(45deg) scale(1); opacity:.75; }
      100%{ transform: translateY(120vh) rotate(75deg) scale(.8); opacity:0; }
    }
    
    canvas{ position:fixed; inset:0; pointer-events:none; z-index: 2; }
    
    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
      position: relative;
      z-index: 3;
    }
    
    .card{
      width: min(720px, 100%);
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: 32px 18px 32px 18px;
      padding: 26px;
      box-shadow: 0 18px 46px var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      position: relative;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      transform: translateY(20px);
    }
    .card.show {
      opacity: 1;
      transform: translateY(0);
    }
    
    h1{
      margin: 0 0 12px;
      font-size: 26px;
      color: var(--rose);
      letter-spacing: .5px;
      user-select:none;
    }
    p{ margin: 10px 0; line-height: 1.7; }
    .center{ text-align:center; }
    
    .tag{
      display:inline-block;
      font-size:12px;
      padding: 8px 14px;
      border-radius:999px;
      background: rgba(255, 240, 244, .9);
      border: 1px solid rgba(255, 180, 205, .55);
      color: var(--rose2);
      margin-bottom: 12px;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top: 14px; }
    
    input{
      flex: 1; min-width: 210px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--inputBorder);
      background: var(--inputBg);
      color: #4a2f35;
      outline:none;
      font-size: 15px;
      transition: all 0.3s ease;
    }
    input:focus {
      border-color: var(--btn);
      box-shadow: 0 0 0 3px rgba(255, 77, 109, 0.1);
    }
    input::placeholder{ color: rgba(120, 60, 75, .55); }
    
    .btn{
      padding: 12px 18px;
      border-radius: 14px;
      border: 0;
      background: linear-gradient(135deg, var(--btn), var(--btn2));
      color: var(--btnText);
      cursor:pointer;
      font-size: 16px;
      box-shadow: 0 10px 22px rgba(255, 77, 109, .25);
      transition: all .2s ease;
      user-select:none;
      touch-action: manipulation;
      position: relative;
      overflow: hidden;
    }
    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    .btn:active::after {
      width: 300px;
      height: 300px;
    }
    .btn:hover{ filter: brightness(1.05); transform: translateY(-2px); box-shadow: 0 14px 28px rgba(255, 77, 109, .35); }
    .btn:active{ transform: translateY(0px) scale(.98); }
    
    .hint{ opacity: .9; color: #6e3b43; font-size: 14px; }
    .msg{ margin-top: 12px; font-weight: 700; color: #b13e55; min-height: 24px; transition: all 0.3s ease; }
    .hidden{ display:none !important; }
    .tiny{ opacity:.85; font-size: 13px; color: #7a3e4a; }
    .divider{ margin: 16px 0 10px; opacity: .75; color: #b65a6d; font-size: 14px; }

    /* ç…§ç‰‡å±•ç¤ºåŒºåŸŸ */
    .photo-gallery {
      margin: 20px 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      max-height: 450px;
      overflow-y: auto;
      padding: 12px;
      background: rgba(255,255,255,0.3);
      border-radius: 16px;
      border: 1px solid rgba(255, 180, 205, 0.3);
    }
    
    .photo-item {
      position: relative;
      aspect-ratio: 1;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background: #f0f0f0;
    }
    
    .photo-item:hover {
      transform: scale(1.05) rotate(2deg);
      box-shadow: 0 8px 24px rgba(255, 77, 109, 0.25);
      z-index: 10;
    }
    
    .photo-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
      display: block;
    }
    
    .photo-item:hover img {
      transform: scale(1.1);
    }
    
    .photo-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(166, 59, 79, 0.9));
      color: white;
      padding: 20px 8px 8px;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .photo-item:hover .photo-caption {
      opacity: 1;
    }

    /* å¤§å›¾é¢„è§ˆ */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.92);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .lightbox.show {
      display: flex;
      opacity: 1;
    }
    
    .lightbox img {
      max-width: 95%;
      max-height: 95%;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .lightbox.show img {
      transform: scale(1);
    }
    
    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 30px;
      color: white;
      font-size: 40px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
      z-index: 1001;
    }
    
    .lightbox-close:hover {
      opacity: 1;
    }

    /* éŸ³ä¹æ§åˆ¶ */
    .music-control {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(255, 180, 205, 0.5);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      font-size: 20px;
      backdrop-filter: blur(10px);
    }
    
    .music-control:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(255, 77, 109, 0.3);
    }
    
    .music-control.playing {
      animation: rotate 3s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* å½©è›‹æç¤º */
    .easter{
      margin-top: 16px;
      padding: 14px;
      border-radius: 16px;
      background: rgba(255, 225, 235, .7);
      border: 1px dashed rgba(255, 120, 160, .45);
      color: #6e3b43;
      display:none;
      animation: fadeIn 0.5s ease;
    }
    .easter.show{ display:block; }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* çˆ±å¿ƒé›¨ */
    .mini-heart{
      position: fixed;
      top: -18px;
      left: 0;
      z-index: 999;
      pointer-events:none;
      opacity: .9;
      filter: drop-shadow(0 6px 10px rgba(255, 77, 109, .25));
      animation: heartFall 3.8s linear forwards;
    }
    @keyframes heartFall{
      to { transform: translateY(110vh) rotate(25deg); opacity:0; }
    }

    /* è¿›åº¦æŒ‡ç¤ºå™¨ */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--btn), var(--btn2));
      z-index: 1000;
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(255, 77, 109, 0.5);
    }

    /* å¼€åœºé¢„è§ˆå›¾ */
    .preview-img {
      width: 100%;
      max-width: 280px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      animation: float 3s ease-in-out infinite;
      margin: 16px 0;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @media (max-width: 420px){
      h1{ font-size: 22px; }
      .card{ border-radius: 26px 16px 26px 16px; padding: 20px; }
      .photo-gallery { grid-template-columns: repeat(2, 1fr); max-height: 350px; gap: 8px; }
      .preview-img { max-width: 220px; }
    }
    
    /* åŠ è½½åŠ¨ç”» */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <!-- è¿›åº¦æ¡ -->
  <div class="progress-bar" id="progressBar" style="width: 0%"></div>

  <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
  <div class="music-control" id="musicBtn" title="ç‚¹å‡»æ’­æ”¾/æš‚åœéŸ³ä¹">ğŸµ</div>

  <!-- éŸ³é¢‘å…ƒç´  -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/2078190587.aac" type="audio/aac">
    <source src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/2078190587.mp3" type="audio/mpeg">
    ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
  </audio>

  <!-- èŠ±ç“£è£…é¥° -->
  <script>
    for(let i=0;i<12;i++){
      const p=document.createElement('div');
      p.className='petal';
      p.style.left = (Math.random()*100)+'vw';
      p.style.animationDuration = (8+Math.random()*8)+'s';
      p.style.animationDelay = (-Math.random()*10)+'s';
      p.style.transform = `rotate(45deg) scale(${0.7+Math.random()*0.8})`;
      p.style.background = `rgba(255, ${210+Math.floor(Math.random()*30)}, ${220+Math.floor(Math.random()*30)}, ${0.45+Math.random()*0.35})`;
      document.body.appendChild(p);
    }
  </script>

  <canvas id="fx"></canvas>

  <!-- å¤§å›¾é¢„è§ˆ -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <span class="lightbox-close">&times;</span>
    <img id="lightboxImg" src="" alt="é¢„è§ˆ">
  </div>

  <div class="wrap">
    <!-- é˜¶æ®µ0ï¼šå¼€åœº -->
    <div class="card show" id="stage0">
      <div class="center">
        <div class="tag">ğŸ’Œ æƒ…äººèŠ‚ </div>
        <h1>å­Ÿå­æ¶µå®å®ï¼Œä½ æ”¶åˆ°ä¸€å°ä¿¡ ğŸ’—</h1>
        <p class="hint">è¯´ä¸å®šæ˜¯æŸä½ä¸çŸ¥åå…ˆç”Ÿç»™æ‚¨é€çš„ï¼Œæ‰“å¼€çœ‹ä¸€çœ‹å‘¢ğŸ˜‹</p>
        
        <!-- å¼€åœºé¢„è§ˆå›¾ -->
        <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/happy.jpg" 
             class="preview-img" 
             alt="æˆ‘ä»¬çš„å›å¿†"
             onerror="this.style.display='none'">
        
        <div class="divider">â€” ğŸ’ â€”</div>
        <button class="btn" id="openBtn">ç‚¹å¼€ä¿¡å° âœ‰ï¸</button>
        <p class="tiny" style="margin-top:14px;">æç¤ºï¼šå…¨ç­”å¯¹ä¼šè§£é”è¶…å¤šçƒŸèŠ± ğŸ† å’Œä¸“å±ç…§ç‰‡å¢™</p>
      </div>
    </div>

    <!-- é˜¶æ®µ1ï¼šé—®é¢˜1 -->
    <div class="card hidden" id="stage1">
      <h1>ç¬¬ä¸€å…³ï¼šæˆ‘ä»¬ç¬¬ä¸€æ¬¡è§é¢åœ¨å“ªé‡Œï¼Ÿ ğŸ§ª</h1>
      <p class="hint">æç¤ºï¼šå¯ä»¥å†™ç®€ç§°ï¼Œæ¯”å¦‚"xxxå®éªŒå®¤/åœ°é“Xå·çº¿/xå·æ¥¼"ã€‚</p>
      <div class="row">
        <input id="a1" placeholder="ä½ çš„ç­”æ¡ˆâ€¦" autocomplete="off" />
        <button class="btn" id="next1">æäº¤ âœ…</button>
      </div>
      <div class="msg" id="msg1"></div>
    </div>

    <!-- é˜¶æ®µ2ï¼šé—®é¢˜2 -->
    <div class="card hidden" id="stage2">
      <h1>ç¬¬äºŒå…³ï¼šä½ æœ€å¸¸å«æˆ‘çš„æ˜µç§°æ˜¯ï¼Ÿ ğŸ¥º</h1>
      <div class="row">
        <input id="a2" placeholder="ä½ çš„ç­”æ¡ˆâ€¦" autocomplete="off" />
        <button class="btn" id="next2">æäº¤ âœ…</button>
      </div>
      <div class="msg" id="msg2"></div>
    </div>

    <!-- é˜¶æ®µ3ï¼šé—®é¢˜3 -->
    <div class="card hidden" id="stage3">
      <h1>ç¬¬ä¸‰å…³ï¼šæˆ‘ä»¬çš„çºªå¿µæ—¥ï¼ˆæˆ–æŸä¸ªé‡è¦æ—¥å­ï¼‰æ˜¯ï¼Ÿ ğŸ—“ï¸</h1>
      <p class="hint">æ ¼å¼éšæ„ï¼šä¾‹å¦‚ï¼š2026.05.20 / 5æœˆ20æ—¥ éƒ½è¡Œã€‚</p>
      <div class="row">
        <input id="a3" placeholder="ä½ çš„ç­”æ¡ˆâ€¦" autocomplete="off" />
        <button class="btn" id="next3">æäº¤ âœ…</button>
      </div>
      <div class="msg" id="msg3"></div>
    </div>

    <!-- é˜¶æ®µ4ï¼šForever -->
    <div class="card hidden" id="stage4q">
      <h1>ç¬¬å››å…³ï¼šä½ è¦é™ªæå¤©å¢å…ˆç”Ÿå¤šä¹…å‘¢ï¼Ÿ ğŸ’</h1>
      <p class="hint">è¿™æ˜¯é€åˆ†é¢˜ï¼Œä½†ä¹Ÿè¦è®¤çœŸé€‰å“¦ï½</p>
      <div class="row" style="justify-content: center;">
        <button class="btn" id="foreverBtn" style="font-size: 18px; padding: 16px 32px;">Forever â™¾ï¸ğŸ’—</button>
      </div>
      <div class="msg" id="msg4q"></div>
    </div>

    <!-- é˜¶æ®µ5ï¼šæˆåŠŸé¡µé¢ -->
    <div class="card hidden" id="stage5">
      <div class="center">
        <div class="tag">ğŸ‰ è§£é”æˆåŠŸ</div>

        <!-- å½©è›‹è§¦å‘ç‚¹ï¼šè¿ç‚¹æ ‡é¢˜ 5 æ¬¡ -->
        <h1 id="finalTitle" style="cursor: pointer; transition: transform 0.2s;">æƒ…äººèŠ‚å¿«ä¹ï¼Œæˆ‘çˆ±ä½ ï¼Œå­Ÿå­æ¶µ â¤ï¸</h1>

        <p id="loveText" style="font-size: 16px; line-height: 1.8;">
          è°¢è°¢ä½ æ¥ç‚¹å¼€è¿™ä¸ªå°ç½‘ç«™ã€‚ä»Šæ™šçš„æƒŠå–œï¼š<b>æƒ³ä¸åˆ°äº†QAQï¼ˆä¸åœ¨ä½ èº«è¾¹ï¼‰ï¼Œé‚£ä½ å›å»éšä¾¿æè¦æ±‚å§</b>ï¼ˆæƒ©ç½šæˆ‘å§ï¼ˆmå±æ€§å¤§çˆ†å‘!ï¼‰ï¼‰ã€‚
        </p>

        <!-- ç…§ç‰‡å¢™ -->
        <div style="margin: 24px 0;">
          <p style="font-size: 14px; color: var(--rose); margin-bottom: 12px; font-weight: 600;">ğŸ“¸ æˆ‘ä»¬çš„ä¸“å±å›å¿†å¢™</p>
          <div class="photo-gallery" id="photoGallery">
            <!-- ç…§ç‰‡1: Happyness.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/Happyness.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/Happyness.jpg" alt="å¹¸ç¦æ—¶åˆ»" loading="lazy">
              <div class="photo-caption">å¹¸ç¦æ—¶åˆ» ğŸ’•</div>
            </div>
            
            <!-- ç…§ç‰‡2: happy.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/happy.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/happy.jpg" alt="å¼€å¿ƒæ—¥å¸¸" loading="lazy">
              <div class="photo-caption">å¼€å¿ƒæ—¥å¸¸ ğŸ˜Š</div>
            </div>
            
            <!-- ç…§ç‰‡3: her City.jpg (æ³¨æ„ç©ºæ ¼è¦ç¼–ç ä¸º%20) -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/her%20City.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/her%20City.jpg" alt="å¥¹çš„åŸå¸‚" loading="lazy">
              <div class="photo-caption">å¥¹çš„åŸå¸‚ ğŸŒ†</div>
            </div>
            
            <!-- ç…§ç‰‡4: lab.png -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/lab.png')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/lab.png" alt="å®éªŒå®¤å›å¿†" loading="lazy">
              <div class="photo-caption">å®éªŒå®¤å›å¿† ğŸ§ª</div>
            </div>
            
            <!-- ç…§ç‰‡5: listening.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/listening.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/listening.jpg" alt="è†å¬æ—¶åˆ»" loading="lazy">
              <div class="photo-caption">è†å¬æ—¶åˆ» ğŸ§</div>
            </div>
            
                        <!-- ç…§ç‰‡6: walk.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/walk.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/walk.jpg" alt="æ¼«æ­¥æ—¶å…‰" loading="lazy">
              <div class="photo-caption">æ¼«æ­¥æ—¶å…‰ ğŸš¶</div>
            </div>

            <!-- ç…§ç‰‡7: aojiaodehan.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/aojiaodehan.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/aojiaodehan.jpg" alt="å‚²å¨‡çš„æ¶µ" loading="lazy">
              <div class="photo-caption">å‚²å¨‡çš„æ¶µ ğŸ˜¤</div>
            </div>

            <!-- ç…§ç‰‡8: tired han.jpg -->
            <div class="photo-item" onclick="openLightbox('https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/tired%20han.jpg')">
              <img src="https://raw.githubusercontent.com/R1yhtp/ILOVEMENGZIHAN/main/tired%20han.jpg" alt="ç–²æƒ«çš„æ¶µ" loading="lazy">
              <div class="photo-caption">ç–²æƒ«çš„æ¶µ ğŸ˜´</div>
            </div>
          </div>
        </div>

        <div class="divider">â€” ğŸ† â€”</div>

        <button class="btn" id="boom" style="font-size: 17px; padding: 14px 28px;">ç‚¹æˆ‘é¢†å–çƒŸèŠ± ï¼ˆä¸è¦è¿ç»­ç‚¹å¥½å¤šæ¬¡å“¦~ä¼šå¡ï¼‰ ğŸ‡</button>

        <p class="tiny" style="margin-top:14px;">å…‘æ¢ç ï¼š<b>ILOVEYOU</b> ğŸ’˜</p>
        <p class="tiny">é™„åŠ æ‰¿è¯ºï¼š<b>Forever</b> â™¾ï¸</p>

        <div class="easter" id="easterBox">
          ğŸ¥š å½©è›‹è§£é”æˆåŠŸï¼<br>
          ğŸ’— ä½ æ˜¯æˆ‘è¿™è¾ˆå­æœ€æƒ³è®¤çœŸå–œæ¬¢çš„äººã€‚<br>
        </div>
        <p style="margin-top: 20px; color: #888; font-size: 14px; font-style: italic; opacity: 0.8;">
        æˆ‘æƒ³å’Œå®å®åˆ›é€ æ›´å¤šç¾å¥½çš„å›å¿†ğŸ˜‹
        </p>

        <p class="tiny" style="margin-top:12px; opacity:.75;">
          ï¼ˆå°å½©è›‹ï¼šğŸ˜‰é•¿æŒ‰çƒŸèŠ±è“„åŠ›æŒ‰é’®è¯•è¯•å‘¢ï¼‰
        </p>
      </div>
    </div>
  </div>

<script>
  // ====== ç­”æ¡ˆåŒº ======
  const ANSWERS = {
    q1: ["CTFå®éªŒå®¤", "å®éªŒå®¤", "8å·æ¥¼","å…«å·æ¥¼","ctfå®éªŒå®¤"],
    q2: ["å®å®", "å­¦é•¿"],
    q3: ["2026.01.02", "2026.1.2", "1æœˆ2æ—¥","1.2"]
  };

  // ====== å·¥å…·å‡½æ•° ======
  const $ = (id) => document.getElementById(id);
  const progressBar = $('progressBar');
  let currentStage = 0;
  const totalStages = 5;

  function updateProgress() {
    const progress = ((currentStage) / totalStages) * 100;
    progressBar.style.width = progress + '%';
  }

  function show(id) {
    // éšè—æ‰€æœ‰å¡ç‰‡
    ["stage0","stage1","stage2","stage3","stage4q","stage5"].forEach(s => {
      const el = $(s);
      el.classList.remove("show");
      setTimeout(() => el.classList.add("hidden"), 300);
    });
    
    // æ˜¾ç¤ºç›®æ ‡å¡ç‰‡
    setTimeout(() => {
      const target = $(id);
      target.classList.remove("hidden");
      void target.offsetWidth;
      target.classList.add("show");
      window.scrollTo({top:0, behavior:"smooth"});
      
      const stageMap = { 'stage0': 0, 'stage1': 1, 'stage2': 2, 'stage3': 3, 'stage4q': 4, 'stage5': 5 };
      currentStage = stageMap[id] || 0;
      updateProgress();
    }, 300);
  }

  function ok(input, list){
    const v = (input||"").trim().toLowerCase();
    return list.some(a => v.includes(a.toLowerCase()));
  }

  // ====== éŸ³ä¹æ§åˆ¶ ======
  const musicBtn = $('musicBtn');
  const bgMusic = $('bgMusic');
  let isPlaying = false;

  function toggleMusic() {
    if (isPlaying) {
      bgMusic.pause();
      musicBtn.textContent = 'ğŸ”‡';
      musicBtn.classList.remove('playing');
    } else {
      bgMusic.play().catch(e => {
        console.log('æ’­æ”¾å¤±è´¥:', e);
        musicBtn.textContent = 'â–¶ï¸';
      });
      musicBtn.textContent = 'ğŸµ';
      musicBtn.classList.add('playing');
    }
    isPlaying = !isPlaying;
  }

  musicBtn.onclick = toggleMusic;

  // é¦–æ¬¡ç‚¹å‡»é¡µé¢æ—¶å°è¯•æ’­æ”¾
  document.addEventListener('click', function initAudio() {
    if (!isPlaying && bgMusic.paused) {
      bgMusic.play().then(() => {
        isPlaying = true;
        musicBtn.classList.add('playing');
      }).catch(() => {});
    }
    document.removeEventListener('click', initAudio);
  }, { once: true });

  // ====== ç…§ç‰‡æŸ¥çœ‹å™¨ ======
  function openLightbox(src) {
    $('lightboxImg').src = src;
    $('lightbox').classList.add('show');
  }

  function closeLightbox() {
    $('lightbox').classList.remove('show');
  }

  // ESCé”®å…³é—­å¤§å›¾
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeLightbox();
  });

  // ====== äº‹ä»¶ç»‘å®š ======
  $("openBtn").onclick = () => {
    show("stage1");
    if (!isPlaying) {
      bgMusic.play().then(() => {
        isPlaying = true;
        musicBtn.classList.add('playing');
      }).catch(() => {});
    }
  };

  $("next1").onclick = () => {
    if(ok($("a1").value, ANSWERS.q1)){
      $("msg1").textContent="âœ… å¤ªå¯¹äº†ï¼ä¸æ„§æ˜¯æˆ‘å®¶å® ğŸ¥°";
      $("msg1").style.color = "#2ecc71";
      setTimeout(()=>show("stage2"), 600);
    } else {
      $("msg1").textContent="å†æƒ³æƒ³ï½æˆ‘åœ¨ç­‰ä½  ğŸ˜—";
      $("msg1").style.color = "#e74c3c";
      shake($("a1"));
    }
  };

  $("next2").onclick = () => {
    if(ok($("a2").value, ANSWERS.q2)){
      $("msg2").textContent="âœ… è¿™ç§°å‘¼æˆ‘è¶…å–œæ¬¢çš„ï¼ğŸ’";
      $("msg2").style.color = "#2ecc71";
      setTimeout(()=>show("stage3"), 600);
    } else {
      $("msg2").textContent="ä¸å¯¹å“¦ï½ä½ æ˜æ˜æ›´ä¼šå«æˆ‘ ğŸ¥º";
      $("msg2").style.color = "#e74c3c";
      shake($("a2"));
    }
  };

  $("next3").onclick = () => {
    if(ok($("a3").value, ANSWERS.q3)){
      $("msg3").textContent="âœ… è®°å¾—å¾ˆæ¸…æ¥šå‘¢ï¼å¥½çˆ±ä½  ğŸ’—";
      $("msg3").style.color = "#2ecc71";
      setTimeout(()=>show("stage4q"), 700);
    } else {
      $("msg3").textContent="å·®ä¸€ç‚¹ç‚¹ï½æç¤ºï¼šè·¨å¹´ä¸ä¹…å“¦~ ğŸ˜†";
      $("msg3").style.color = "#e74c3c";
      shake($("a3"));
    }
  };

  $("foreverBtn").onclick = () => {
    $("msg4q").textContent = "âœ… é€‰å¾—çœŸå¥½ã€‚é‚£æˆ‘ä»¬å°± â€”â€” Forever â™¾ï¸ğŸ’•";
    $("msg4q").style.color = "#2ecc71";
    setTimeout(()=>show("stage5"), 1000);
  };

  // è¾“å…¥æ¡†å›è½¦æäº¤
  ['a1','a2','a3'].forEach((id, idx) => {
    $(id).addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        $(['next1','next2','next3'][idx]).click();
      }
    });
  });

  function shake(el) {
    el.style.animation = 'shake 0.5s';
    setTimeout(() => el.style.animation = '', 500);
  }

  const style = document.createElement('style');
  style.textContent = `
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
  `;
  document.head.appendChild(style);

  // ====== çƒŸèŠ±ç³»ç»Ÿ ======
  const canvas = $("fx"), ctx = canvas.getContext("2d");
  function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
  addEventListener("resize", resize); resize();

  let parts = [];
  const colors = ["#ffffff", "#ffe3ee", "#ffb3c7", "#ff4d6d", "#ffc2d1", "#ffd6e6", "#ff8fa3", "#c9184a"];

  function spawnBurst(x, y, mult=1){
    const c = colors[Math.floor(Math.random()*colors.length)];
    const count = Math.floor((280 + Math.random()*120) * mult);
    for(let i=0;i<count;i++){
      const a = Math.random()*Math.PI*2;
      const s = (Math.random()*7.6 + 1.8) * (0.8 + Math.random()*0.4);
      const size = (1.6 + Math.random()*1.8) * (0.9 + Math.random()*0.3);
      parts.push({
        x,y,
        vx:Math.cos(a)*s,
        vy:Math.sin(a)*s,
        life: 120 + Math.random()*70,
        color: c,
        r: size,
        decay: 0.98 + Math.random()*0.01
      });
    }
  }

  function fireworksShow(mult=1){
    const rounds = Math.floor(12*mult);
    for(let i=0;i<rounds;i++){
      setTimeout(()=>{
        const bursts = 2 + Math.floor(Math.random()*3);
        for(let b=0;b<bursts;b++){
          const x = Math.random()*canvas.width;
          const y = Math.random()*canvas.height*0.45 + canvas.height*0.06;
          spawnBurst(x,y, mult);
        }
      }, i*140);
    }
  }

  function tick(){
    ctx.fillStyle = 'rgba(0,0,0,0.05)';
    ctx.fillRect(0,0,canvas.width,canvas.height);
    
    parts = parts.filter(p => p.life>0);
    for(const p of parts){
      p.x += p.vx; p.y += p.vy;
      p.vy += 0.032;
      p.vx *= p.decay; p.vy *= p.decay;
      p.life -= 1.2;

      ctx.globalAlpha = Math.max(p.life/180, 0);
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fillStyle = p.color;
      ctx.fill();
      
      if (p.life > 50) {
        ctx.globalAlpha = Math.max((p.life-50)/300, 0);
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r*2, 0, Math.PI*2);
        ctx.fillStyle = p.color;
        ctx.fill();
      }
    }
    ctx.globalAlpha = 1;
    requestAnimationFrame(tick);
  }
  tick();

  $("boom").onclick = () => fireworksShow(1.2);

  // ====== å½©è›‹ç³»ç»Ÿ ======
  let tapCount = 0;
  let tapTimer = null;

  function spawnHeartRain(times=35){
    for(let i=0;i<times;i++){
      setTimeout(()=>{
        const h = document.createElement("div");
        h.className="mini-heart";
        h.textContent = ["ğŸ’—","ğŸ’–","ğŸ’˜","â¤ï¸","ğŸ’•","ğŸ’“","ğŸ’"][Math.floor(Math.random()*7)];
        h.style.left = (Math.random()*100) + "vw";
        h.style.fontSize = (16 + Math.random()*24) + "px";
        h.style.transform = `translateY(0) rotate(${(Math.random()*40-20)}deg)`;
        h.style.animationDuration = (3 + Math.random()*2) + "s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(), 5200);
      }, i*50);
    }
  }

  function unlockEasterEgg(){
    $("easterBox").classList.add("show");
    spawnHeartRain(50);
    fireworksShow(2);
    const title = $("finalTitle");
    title.style.transform = "scale(1.1)";
    setTimeout(() => title.style.transform = "scale(1)", 200);
  }

  $("finalTitle").addEventListener("click", ()=>{
    tapCount++;
    $("finalTitle").style.transform = `scale(${1 + tapCount*0.02})`;
    setTimeout(() => $("finalTitle").style.transform = "scale(1)", 150);
    
    clearTimeout(tapTimer);
    tapTimer = setTimeout(()=>{ tapCount = 0; }, 1000);
    if(tapCount >= 5){
      tapCount = 0;
      unlockEasterEgg();
    }
  });

  // é•¿æŒ‰çƒŸèŠ±æŒ‰é’®å½©è›‹
  let pressTimer = null;
  $("boom").addEventListener("pointerdown", ()=>{
    pressTimer = setTimeout(()=>{ 
      fireworksShow(3); 
      spawnHeartRain(70);
      if (navigator.vibrate) navigator.vibrate(200);
    }, 800);
  });
  ["pointerup","pointercancel","pointerleave"].forEach(ev=>{
    $("boom").addEventListener(ev, ()=>{ clearTimeout(pressTimer); });
  });

  // é”®ç›˜å½©è›‹ï¼šè¾“å…¥"love"è§¦å‘ç‰¹æ•ˆ
  let keyBuffer = '';
  document.addEventListener('keypress', (e) => {
    keyBuffer += e.key.toLowerCase();
    if (keyBuffer.length > 10) keyBuffer = keyBuffer.slice(-10);
    if (keyBuffer.includes('love')) {
      keyBuffer = '';
      spawnHeartRain(30);
      fireworksShow(1.5);
    }
  });

  // åˆå§‹åŒ–
  updateProgress();
</script>
</body>
</html>